<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAKEP.id EWS - Admin Dashboard</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-shield-alt"></i> CAKEP.id EWS - Admin Dashboard</h1>
                <div class="user-info">
                    <span>Admin</span>
                    <i class="fas fa-user-circle"></i>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="validation">
                <i class="fas fa-check-circle"></i> Antrian Validasi
            </button>
            <button class="nav-tab" data-tab="upload">
                <i class="fas fa-upload"></i> Formulir Training
            </button>
            <button class="nav-tab" data-tab="monitoring">
                <i class="fas fa-chart-line"></i> Monitor Sistem
            </button>
            <button class="nav-tab" data-tab="training">
                <i class="fas fa-database"></i> Data Training
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Validation Tab -->
            <div id="validationTab" class="tab-content active">
                <div class="section-header">
                    <h2>Antrian Validasi</h2>
                    <button class="btn btn-primary" id="refreshValidationBtn">
                        <i class="fas fa-refresh"></i> Refresh
                    </button>
                </div>

                <div class="filter-bar">
                    <select id="typeFilter">
                        <option value="">Semua Tipe</option>
                        <option value="detection">Deteksi CV</option>
                        <option value="nlp_analysis">Analisis NLP</option>
                        <option value="risk_assessment">Penilaian Risiko</option>
                        <option value="procedure">Prosedur</option>
                        <option value="schedule">Jadwal</option>
                    </select>
                    <select id="priorityFilter">
                        <option value="">Semua Prioritas</option>
                        <option value="HIGH">Tinggi</option>
                        <option value="MEDIUM">Sedang</option>
                        <option value="LOW">Rendah</option>
                    </select>
                </div>

                <div id="validationQueue" class="validation-queue">
                    <!-- Item validasi akan dimuat di sini -->
                </div>
            </div>

            <!-- Formulir Training Tab -->
            <div id="uploadTab" class="tab-content">
                <div class="section-header">
                    <h2>Formulir Training AI</h2>
                    <p>Upload data training untuk meningkatkan akurasi AI dalam mendeteksi kerusakan</p>
                </div>

                <div class="upload-section">
                    <div class="upload-card">
                        <h3><i class="fas fa-images"></i> Upload Gambar Training</h3>
                        <input type="file" id="imageUpload" multiple accept="image/*" style="display: none;">
                        <div class="upload-area" id="imageUploadArea">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Seret & lepas gambar di sini atau <span class="upload-link">pilih file</span></p>
                        </div>
                        
                        <div class="risk-category-selector">
                            <label>Kategori Risiko:</label>
                            <div class="risk-buttons">
                                <button type="button" class="risk-btn low" data-risk="LOW">
                                    <i class="fas fa-check-circle"></i> LOW RISK
                                </button>
                                <button type="button" class="risk-btn medium" data-risk="MEDIUM">
                                    <i class="fas fa-exclamation-triangle"></i> MEDIUM RISK
                                </button>
                                <button type="button" class="risk-btn high" data-risk="HIGH">
                                    <i class="fas fa-times-circle"></i> HIGH RISK
                                </button>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" id="uploadWithRiskBtn" disabled>
                            <i class="fas fa-upload"></i> Upload & Kategorikan
                        </button>
                    </div>
                </div>

                <div class="training-status">
                    <h3><i class="fas fa-brain"></i> Status Model AI</h3>
                    <div class="status-cards">
                        <div class="status-card">
                            <h4>Auto Training</h4>
                            <div class="status-indicator active">
                                <i class="fas fa-sync-alt rotating"></i>
                                <span>Aktif - Model dilatih otomatis setiap ada data baru</span>
                            </div>
                        </div>
                        <div class="status-card">
                            <h4>Data Training</h4>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <span class="stat-number" id="lowRiskCount">0</span>
                                    <span class="stat-label">Low Risk</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number" id="mediumRiskCount">0</span>
                                    <span class="stat-label">Medium Risk</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number" id="highRiskCount">0</span>
                                    <span class="stat-label">High Risk</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>

                <div id="training-status" class="training-status">
                    <!-- Status pelatihan akan dimuat di sini -->
                </div>
            </div>

            <!-- System Monitor Tab -->
            <div id="monitoringTab" class="tab-content">
                <div class="section-header">
                    <h2>Monitor Sistem AI</h2>
                    <p>Grafik perkembangan AI dan analisis performa model</p>
                    <button class="btn btn-primary" id="refreshSystemBtn">
                        <i class="fas fa-refresh"></i> Refresh Data
                    </button>
                </div>

                <div class="monitoring-grid">
                    <!-- AI Performance Metrics -->
                    <div class="metric-card">
                        <h3><i class="fas fa-brain"></i> Performa Model AI</h3>
                        <div class="metric-content">
                            <div class="metric-item">
                                <span class="metric-label">Akurasi Model:</span>
                                <span class="metric-value" id="modelAccuracy">--</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Total Prediksi:</span>
                                <span class="metric-value" id="totalPredictions">--</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Prediksi Benar:</span>
                                <span class="metric-value" id="correctPredictions">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Detection Statistics -->
                    <div class="metric-card">
                        <h3><i class="fas fa-search"></i> Statistik Deteksi</h3>
                        <div class="chart-container">
                            <canvas id="detectionChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Risk Level Distribution -->
                    <div class="metric-card">
                        <h3><i class="fas fa-exclamation-triangle"></i> Distribusi Risk Level</h3>
                        <div class="risk-stats">
                            <div class="risk-item risk-low">
                                <span class="risk-label">Low Risk</span>
                                <span class="risk-count" id="lowRiskCount">--</span>
                            </div>
                            <div class="risk-item risk-medium">
                                <span class="risk-label">Medium Risk</span>
                                <span class="risk-count" id="mediumRiskCount">--</span>
                            </div>
                            <div class="risk-item risk-high">
                                <span class="risk-label">High Risk</span>
                                <span class="risk-count" id="highRiskCount">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Training Progress -->
                    <div class="metric-card">
                        <h3><i class="fas fa-chart-line"></i> Perkembangan Training</h3>
                        <div class="training-progress">
                            <div class="progress-item">
                                <span class="progress-label">Data Training:</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="trainingDataProgress" style="width: 0%"></div>
                                </div>
                                <span class="progress-text" id="trainingDataText">0/100 samples</span>
                            </div>
                            <div class="progress-item">
                                <span class="progress-label">Model Training:</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="modelTrainingProgress" style="width: 0%"></div>
                                </div>
                                <span class="progress-text" id="modelTrainingText">0 epochs completed</span>
                            </div>
                        </div>
                    </div>

                    <!-- AI Improvement Areas -->
                    <div class="metric-card full-width">
                        <h3><i class="fas fa-clipboard-list"></i> Area yang Perlu Diperbaiki</h3>
                        <div class="improvement-list" id="improvementAreas">
                            <div class="improvement-item">
                                <i class="fas fa-exclamation-circle text-warning"></i>
                                <span>Akurasi deteksi untuk Generator masih rendah (65%)</span>
                            </div>
                            <div class="improvement-item">
                                <i class="fas fa-exclamation-circle text-warning"></i>
                                <span>Perlu lebih banyak data training untuk Kompresor</span>
                            </div>
                            <div class="improvement-item">
                                <i class="fas fa-info-circle text-info"></i>
                                <span>Model performa baik untuk Motor Listrik (87% akurasi)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Training Data Tab -->
            <div id="trainingTab" class="tab-content">
                <div class="section-header">
                    <h2>Data Training AI</h2>
                    <p>Kelola dan monitor dataset training untuk model AI</p>
                    <button class="btn btn-primary" id="refreshTrainingBtn">
                        <i class="fas fa-refresh"></i> Refresh
                    </button>
                </div>

                <div class="training-stats">
                    <div class="stat-card">
                        <h3><i class="fas fa-images"></i> Total Dataset</h3>
                        <div class="stat-number" id="totalDataset">--</div>
                        <div class="stat-label">Gambar Training</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-check-circle"></i> Ter-validasi</h3>
                        <div class="stat-number" id="validatedData">--</div>
                        <div class="stat-label">Data Sudah Divalidasi</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-clock"></i> Pending</h3>
                        <div class="stat-number" id="pendingData">--</div>
                        <div class="stat-label">Menunggu Validasi</div>
                    </div>
                </div>

                <div class="dataset-filters">
                    <div class="filter-group">
                        <label>Status Validasi:</label>
                        <select id="validationFilter" class="form-input">
                            <option value="">Semua Status</option>
                            <option value="validated">Ter-validasi</option>
                            <option value="pending">Pending</option>
                            <option value="rejected">Ditolak</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Risk Level:</label>
                        <select id="riskFilter" class="form-input">
                            <option value="">Semua Level</option>
                            <option value="LOW">Low</option>
                            <option value="MEDIUM">Medium</option>
                            <option value="HIGH">High</option>
                        </select>
                    </div>
                </div>

                <div class="dataset-table-container">
                    <table class="dataset-table" id="datasetTable">
                        <thead>
                            <tr>
                                <th>Gambar</th>
                                <th>Nama File</th>
                                <th>Risk Level</th>
                                <th>Status</th>
                                <th>Tanggal Upload</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="datasetTableBody">
                            <!-- Dataset entries akan dimuat di sini -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination" id="datasetPagination">
                    <!-- Pagination controls akan dimuat di sini -->
                </div>
            </div>
            </div>
        </main>

                <!-- Validation Modal -->
        <div id="validation-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-title">Validasi Item</h3>
                    <span class="modal-close" onclick="closeModal()">&times;</span>
                </div>
                <div class="modal-body">
                    <div id="modal-content">
                        <!-- Konten modal akan dimuat di sini -->
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-success" id="approveBtn">
                            <i class="fas fa-check"></i> Setujui
                        </button>
                        <button class="btn btn-danger" id="rejectBtn">
                            <i class="fas fa-times"></i> Tolak
                        </button>
                        <button class="btn btn-secondary" onclick="closeModal()">Batal</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Memuat...</p>
            </div>
        </div>

        <!-- Loading overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Loading...</p>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
